<div id="editLocationDetailsView" class="page">
  <div data-bind="template: { name: 'imagePreview-template', data: editLocationController.imagePreview }"></div>

  <div data-bind="visible: editLocationController.openMapEdit()">
    <div class="container" id="header">
      <div class="row">
        <div class="col-xs-2 col-sm-1" style="z-index:60">
          <span id="backbutton" class="material-icons" style="z-index:3000; font-size: 3em" data-bind="click: editLocationController.closeMapEditHandler">navigate_before</i>
            </div>
            <div class="col-xs-8 col-sm-9" style="z-index:60;padding-right:0px">
              <h2 style="margin-top: 5px">Move the marker</h2>
            </div>
            <div class="col-xs-2 col-sm-2" style="z-index:60;padding-right:0px">
              <span class="material-icons" style="font-size: 3em;" data-bind="click: editLocationController.saveMapEditHandler">done</span>
        </div>
      </div>
      <div data-bind="leafletMap: editLocationController.mapController" class="map"></div>
    </div>
  </div>

  <div class="page-content-wrapper" data-bind="visible: (!editLocationController.imagePreview.hasImage() && !editLocationController.openMapEdit())">

    <div id="header">
      <div class="row">
        <div class="col-xs-2 col-sm-1">
          <span id="backbutton" class="material-icons" style="z-index:3000; font-size: 3em" data-bind="click:editLocationController.backToViewLocation">navigate_before</i>
            </div>
            <div class="col-xs-8 col-sm-9" style="z-index:60;padding-right:0px">
              <h2 style="margin-top: 5px">Edit location</h2>
            </div>
            <div class="col-xs-2 col-sm-2" style="z-index:60;padding-right:0px">
              <span class="material-icons" style="font-size: 3em;" data-bind="click: editLocationController.saveEditsBackToView">done</span>
        </div>
      </div>
    </div>

    <div class="container">
      <form>
        <div class="form-group form-group-lg label-floating">
          <label class="control-label" for="locationTitle">Title</label>
          <input type="text" class="form-control" id="locationTitle" data-bind="value: editLocationController.locationData.title">
        </div>
        <div class="form-group label-floating">
          <label class="control-label" for="locationDescription">Description</label>
          <textarea class="form-control" id="locationDescription" rows="4" data-bind="value: editLocationController.locationData.description"></textarea>
        </div>
        <div class="row">
          <span class="material-icons" style="font-size: 3em;" data-bind="click:editLocationController.openMapEditHandler">place</span>
          <span class="material-icons" style="font-size: 3em;" data-collapse-group="myDivs" data-toggle="collapse" data-target=".changeCategoryCollapse" data-bind="text: Util.getCategoryIcon(editLocationController.locationData.category()), click:editLocationController.mapPreviewController.openPanelHandler"></span>
          <span class="material-icons" style="font-size: 3em;" data-collapse-group="myDivs" data-toggle="collapse" data-target=".websiteCollapse" data-bind="click:editLocationController.mapPreviewController.openPanelHandler">language</span>
        </div>
        <div class="websiteCollapse collapse" data-bind="template: { name: 'websiteCollapseTemplate', data: editLocationController.locationData }"></div>
        <div class="changeCategoryCollapse collapse" data-bind="template: { name: 'categoryCollapseTemplate', data: editLocationController.mapPreviewController }"></div>

        <div class="container-fluid">
          <div class="row">
            <!-- ko foreach: editLocationController.locationData.images -->
            <div class="thumbnail-3-no-margin photo-tile">
              <div class="content">
                <img data-bind="attr: { src: $data }, click: $root.editLocationController.openImage" />
              </div>
            </div>
            <!-- /ko -->
            <div class="thumbnail-3-no-margin photo-tile">
              <div class="content">
                <span class="material-icons"><input class="file-upload" type="file" accept="image/*" data-bind="event: { change: editLocationController.addImage }">add_a_photo</span>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="row">
            <input class="btn btn-danger btn-raised col-xs-12 col-sm-12" type="button" value="Delete location" style="color:white" data-bind="click: editLocationController.deleteLocation">
          </div>
        </div>
      </form>
    </div>

  </div>
</div>
